- id: drinkbak_tuya_fix
  alias: Drinkbak tuya fix
  mode: parallel
  trigger: 
    - platform: time_pattern
      minutes: "/5"
  condition:
    - condition: state
      entity_id: input_boolean.wolf_drinkbak
      state:  'off'
  action:
  - service: scene.turn_on
    data:
      entity_id: scene.tuya_drinkbak_uit

- id: drinkbak_automatisch
  alias: Drinkbak Wolf automatisch
  description: Als Wolf zelf triggert gaat de input_boolean aan
  mode: parallel
  trigger:
  - entity_id: binary_sensor.drinkbak
    platform: state
    to: 'on'
  - entity_id: binary_sensor.drinkbak
    platform: state
    to: 'off'
    for: "00:05:00"
  action:
  - service: >-
      {% if is_state('binary_sensor.drinkbak','on') %}
      input_boolean.turn_on
      {% else %}
      input_boolean.turn_off
      {% endif %}
    entity_id: input_boolean.wolf_drinkbak

- id: drinkbak_aan
  alias: Drinkbak Wolf (aan)
  description: Als de input_boolean naar aan gaat
  mode: parallel
  trigger:
  - entity_id: input_boolean.wolf_drinkbak
    platform: state
    to: 'on'
  action:
  - service: adguard.remove_url
    data:
      url: "http://localhost:8123/local/adguard_tuya.txt"
  - service: scene.turn_on
    data:
      entity_id: scene.tuya_drinkbak_aan
  # Gecombineerde actie
  # - service: scene.turn_on
  #   data:
  #     entity_id: >-
  #       {% if is_state('input_boolean.wolf_drinkbak','on') %}
  #       scene.tuya_drinkbak_aan
  #       {% else %}
  #       scene.tuya_drinkbak_uit
  #       {% endif %}
- id: drinkbak_uit
  alias: Drinkbak Wolf (uit)
  description: Als de input_boolean naar uit gaat
  mode: parallel
  trigger:
  - entity_id: input_boolean.wolf_drinkbak
    platform: state
    to: 'off'
  action:
  - service: adguard.add_url
    data:
      name: Tuya (Ramon)
      url: "http://localhost:8123/local/adguard_tuya.txt"
  - service: scene.turn_on
    data:
      entity_id: scene.tuya_drinkbak_aan

# ### Before Tuya integration
# - id: drinkbak_automatisch
#   alias: Drinkbak Wolf automatisch aan
#   mode: parallel
#   trigger:
#   - entity_id: binary_sensor.drinkbak
#     platform: state
#     to: 'on'
#   - entity_id: switch.drinkbak_van_wolf
#     platform: state
#     to: 'on'
#     for: "00:06:00"
#   action:
#   - service: >-
#       {% if is_state('switch.drinkbak_van_wolf','off') %}
#       switch.turn_on
#       {% else %}
#       switch.turn_off
#       {% endif %}
#     entity_id: switch.drinkbak_van_wolf